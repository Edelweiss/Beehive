{% set edition = '' %}
{% set text = '' %}
{% set ddb = true %}

<table class="apiary">
  <!--thead>
    <tr>
      <th class="edition">Edition</th>
      <th class="text">Text</th>
      <th class="position">Position</th>
      <th class="description">Description</th>
      <th class="bl">BL</th>
    </tr>
  </thead-->
  <tbody>
    <tr><td colspan="5"><h3>DDB</h3></td></tr>
    {% for c in corrections %}
      {% if ddb and c.registerEntries|first.dclp|length %}
        <tr><td colspan="5"><h3>DCLP</h3></td></tr>
        {% set ddb = false %}
      {% endif %}
      <tr id="{{ c.id }}">
        <td {{ c.edition.title != edition ? 'id=e' ~ c.edition.sort : '' }} class="edition">
          {% if c.edition.title != edition %}
            {{ c.edition.title }}
            {% set edition = c.edition.title %}
            {% set text = '' %}
          {% endif %}
        </td>
        <td class="text">
          {% if c.text != text %}
            {{ c.text }}
            {% set text = c.text %}
          {% endif %}
        </td>
        <td class="position">{{ c.position }}</td>
        <td class="description">{{ c.description }}</td>
        <td class="bl">
          <a href="{{ path('PapyrillioBeehive_CorrectionShow', {'id': c.id}) }}" title="{{ c.compilation.title }}{% if c.compilationPage %}&nbsp;S.&nbsp;{{ c.compilationPage }}{% endif %}{% if c.compilationIndex %}&nbsp;#&nbsp;{{ c.compilationIndex }}{% endif %}">{{ c.compilation.short }}{% if c.compilationPage %}&nbsp;S.&nbsp;{{ c.compilationPage }}{% endif %}{% if c.compilationIndex %}&nbsp;#&nbsp;{{ c.compilationIndex }}{% endif %}</a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
